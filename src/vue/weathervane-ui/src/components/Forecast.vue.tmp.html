<template>
	<div class="MyForecast"> 
		<center>
			<div><br></div>
			<h1>Weather Vane</h1>
			<div><br></div>
			<v-table>
				<thead>
					<tr>
						<th class="text-left">
							Location
						</th>
						<th class="text-left">
							Date
						</th>
						<th class="text-left">
							Temps
						</th>
						<th class="text-left">
							Forecast
						</th>
					</tr>
				</thead>
				<tbody>
					<tr
						v-for="item in forecast"
						:key="item.date"
					>
						<td>{{ item.location }}</td>
						<td>{{ item.date }}</td>
						<td>{{ item.temps }}</td>
						<td>{{ item.forecast }}</td>
					</tr>
				</tbody>
			</v-table>
		</center>
	</div>
</template>

<script>
	import axios from 'axios';

	export default {
		name: "MyForecast", 
		data() {
			return {
				forecast: [],
				address: '', 
				date: '', 
				datePassed: '',
			};
		},
		methods: {
			getForecast() {
				const path = 'http://localhost:5000/forecast?address=' + this.address + '&date=' + this.date + '&datePassed=' + this.datePassed;
				axios.get(path).then((res) => {
					this.forecast = res.data;
					console.log(this.forecast);
				}).catch((error) => {
					console.error(error);
				});
			},
		},
		created: function() {
			this.address = this.$route.params.address;
			this.date = this.$route.params.date;
			this.datePassed = this.$route.params.datePassed;
			this.getForecast();
		}
	};
</script>